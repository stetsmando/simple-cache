/*!
 * 
 * @license SimpleCache v3.X
 * 
 * Author: Stetson Pierce
 * 
 * This source code is licensed under the MIT license.
 */
var SimpleCache=function(e){var t={};function o(l){if(t[l])return t[l].exports;var n=t[l]={i:l,l:!1,exports:{}};return e[l].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,l){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(l,n,function(t){return e[t]}.bind(null,n));return l},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);var l={single:({key:e,value:t,store:o,log:l})=>(l("Set Single"),l(`"${e}":${JSON.stringify(t)}`),o.set(e,t),{key:e,value:t}),multi:({values:e,store:t,log:o})=>{o("Set Multi");const l=[];return e.forEach(({key:e,value:n})=>{l.push(new Promise((l,r)=>{o(`"${e}": ${JSON.stringify(n)}`),t.set(e,n),l({key:e,value:n})}))}),Promise.all(l)}},n={single:function({key:e,local:t,session:o,log:l}){return l("Get Single"),l(`Key ${e}`),this._waterfallLogic({key:e,local:t,session:o,log:l})},multi:function({keys:e,local:t,session:o,log:l}){l("Get Multi");const n=[];return e.forEach(e=>n.push(new Promise(n=>{n(this._waterfallLogic({key:e,local:t,session:o,log:l}))}))),Promise.all(n)},_waterfallLogic:function({key:e,local:t,session:o,log:l}){l("Checking session...");let n="session",r=o.get(e);if(!(r||(l("Checking local..."),n="local",r=t.get(e))))return l("Nothing Found"),null;if(l("Item Found"),r=JSON.parse(r),Date.now()>=r.ttl){if(l("Item Expired"),"session"!==n)return l("Removing local cache"),t.remove(e),null;if(l("Removing session cache"),o.remove(e),l("Checking local..."),!(r=t.get(e)))return l("Nothing Found"),null;if(l("Item Found"),r=JSON.parse(r),Date.now()>=r.ttl)return l("Item Expired"),l("Removing local cache"),t.remove(e),null}return r.value}},r={single:({key:e,stores:t,log:o})=>(o("Remove Single"),o(`"${e}"`),t.forEach(t=>t.remove(e)),{key:e}),multi:({keys:e,stores:t,log:o})=>{o("Remove Multi");const l=[];return e.forEach(e=>{l.push(new Promise(l=>{o(`"${e}"`),t.forEach(t=>t.remove(e)),l(e)}))}),Promise.all(l)}},s={create:(e,t)=>(t(`Init defaultTTL: ${e}`),{build:o=>{if(o.ttl){t(`Using provided ttl: ${o.ttl}`);let e=o.ttl;return delete o.ttl,{value:o,ttl:e}}let l=Date.now()+e;return t(`Setting ttl: ${l}`),{value:o,ttl:l}}})},i={create:({debug:e,key:t=""}={})=>e?e=>{console.log(`${t}${e}`)}:()=>{}},a={set:(e,t)=>sessionStorage.setItem(e,JSON.stringify(t)),get:e=>sessionStorage.getItem(e),remove:e=>sessionStorage.removeItem(e)},u={set:(e,t)=>localStorage.setItem(e,JSON.stringify(t)),get:e=>localStorage.getItem(e),remove:e=>localStorage.removeItem(e)};o.d(t,"default",function(){return c});class c{constructor(e={}){this.ttl=e.ttl?e.ttl:864e5,this.namespace=e.namespace?e.namespace:"SimpleCache:",this.log=i.create({debug:e.debug,key:this.namespace}),this.buildItem=s.create(this.ttl,this.log).build}set(...e){if("string"==typeof e[0]){let t=null;return e[2]?(this.log("Storing in Session"),t=a):(this.log("Storing in Local"),t=u),l.single({key:`${this.namespace}${e[0]}`,value:this.buildItem(e[1]),store:t,log:this.log})}if(Array.isArray(e[0])){const t=e[0].map(({key:e,value:t})=>({key:`${this.namespace}${e}`,value:this.buildItem(t)}));let o=null;return e[1]?(this.log("Storing in Session"),o=a):(this.log("Storing in Local"),o=u),l.multi({namespace:this.namespace,values:t,store:o,log:this.log})}}get(...e){if("string"==typeof e[0])return n.single({key:`${this.namespace}${e[0]}`,local:u,session:a,log:this.log});if(Array.isArray(e[0])){const t=e[0].map(e=>`${this.namespace}${e}`);return n.multi({keys:t,local:u,session:a,log:this.log})}}remove(...e){const t=[a,u];if("string"==typeof e[0])return r.single({key:`${this.namespace}${e[0]}`,stores:t,log:this.log});if(Array.isArray(e[0])){const o=e[0].map(e=>`${this.namespace}${e}`);return r.multi({keys:o,stores:t,log:this.log})}}}}]);